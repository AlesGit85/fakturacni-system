{* SQL Security Audit Stránka - JEDNODUCHÝ TEST *}
{block content}

<div class="container">
    <h1>SQL Security Audit - TEST</h1>
    
    <div class="mb-3">
        <button onclick="testSqlAudit()" data-url="{link runSqlAudit!}" class="btn btn-primary">
            Test SQL Audit AJAX
        </button>
    </div>
    
    <div id="result"></div>
</div>

<script>
function testSqlAudit() {
    const button = event.target;
    const url = button.getAttribute('data-url');
    
    console.log('URL:', url); // Debug
    
    fetch(url, {
        method: 'POST',
        headers: {
            'X-Requested-With': 'XMLHttpRequest',
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        document.getElementById('result').innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
    })
    .catch(error => {
        document.getElementById('result').innerHTML = 'Chyba: ' + error.message;
    });
}
</script>

{/block}